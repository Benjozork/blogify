<div class="comment" *ngIf="isReady">

    <div class="comment-user">
        <app-user-display [user]="comment.commenter" info="name" emSize="2.25"></app-user-display>
    </div>

    <div class="comment-content">
        <markdown class="content-text">{{comment.content}}</markdown>
    </div>

    <div class="comment-last-line">
        <span class="button-reply" (click)="replyingEnabled = !replyingEnabled">Reply</span>

        <span class="separator"></span>

        <!-- Like count - clickable -->
        <a class="like-count clickable negative"
           *ngIf="loggedInObs | async"
           (click)="toggleLike()"
        >
            <fa-icon [icon]="this.comment.likedByUser || this.comment.likedImmediate ? faHeartFilled : faHeartOutline" size="lg" [transform]="{ size: 14 }"></fa-icon>
            <span>&ensp;{{this.comment.likesCount}}</span>
        </a>

        <!-- Like count - non-clickable -->
        <span class="like-count negative" *ngIf="!(loggedInObs | async)">
            <fa-icon [icon]="faHeartOutline" size="lg" [transform]="{ size: 14 }"></fa-icon>
            <span>&ensp;{{comment.likesCount}}</span>
        </span>
    </div>

    <app-create-comment [replying]="replyingEnabled" [comment]="comment"></app-create-comment>

    <div *ngIf="comment.children">
        <div *ngFor="let child of comment.children">
            <app-single-comment [parent]="comment" [comment]="child"></app-single-comment>
        </div>
    </div>

</div>
